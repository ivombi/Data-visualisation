{
  "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
  "data": {
    "url":"https://gist.githubusercontent.com/ivombi/bc443fffdb88824b89d7241e9ef447c5/raw/417e83cd2d7aee96c5819ef849e80063c5a7a312/violence.csv",
    "format":{"type":"csv"}
        },
  "transform":[
     { "aggregate": [
       {
       "op": "sum",
       "field": "fatalities",
       "as": "Totaldeath"
      }],
      "groupby": ["admin1","longitude","latitude","event_type"]
    }
     ] 
    ,
    
  "vconcat":[

    {  
      "selection": {
        "my_selection": {"type": "single", "empty": "none"}
      },
  "description": "map",
      "width": 500,
      "height": 200,
      
  "mark":"circle",
  "encoding":{
    "x":{"field":"latitude", "type": "quantitative"},
    "y":{"field":"longitude","type":"quantitative"},
    "size":{"field":"Totaldeath", "type": "quantitative"},
    "color":{"field":"event_type","type":"nominal"},
    "tooltip":[
      {"field":"admin1","type":"nominal"},
      {"field":"Totaldeath","type":"quantitative"}
    ]
  }
    },
    {
      "width": 700,
      "height": 200,
      "mark":"bar",
      "encoding":{
        "x":{"field":"admin1","type":"nominal"},
        "y":{"field":"Totaldeath","type":"quantitative"},
        "tooltip":[{"field":"Totaldeath","type":"quantitative"}],
        "color": {
      "condition": {
        "selection": "my_selection",
        "value": "red"
      },
      "value": "blue"
    }

        }
      }
    
    ]
}
